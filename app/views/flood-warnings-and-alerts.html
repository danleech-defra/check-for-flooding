
{% extends "layout.html" %}

{% block pageTitle %}
{% if model.place %}
{{ model.place.name }} -
{% endif %}
Flood warnings and alerts in England - GOV.UK
{% endblock %}

{% block content %}

{% if model.isError %}
<div class="govuk-grid-row">
	<div class="govuk-grid-column-full">
		<div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="govuk-error-summary">
			<h2 class="govuk-error-summary__title" id="error-summary-title">
				There is a problem
			</h2>
			<div class="govuk-error-summary__body">
				<ul class="govuk-list govuk-error-summary__list">
					<li>
						<a href="#location">
							{% if model.isErrorPostcode %}
              Enter a full postcode
							{% else %}
							Enter a town or postcode
							{% endif %}
						</a>
					</li>
				</ul>
			</div>
		</div>
	</div>
</div>
{% endif %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-xl">
      Flood warnings and alerts in England
    </h1>
    {% include "partials/list-search.html" %}
  </div>
</div>

{% if model.isMultipleMatch %}
<div class="govuk-grid-row">
	<div class="govuk-grid-column-two-thirds">
		<h2 class="govuk-heading-s govuk-!-margin-top-4">Locations matching '{{ model.term }}'</h2>
		<p>More than one match was found for your location. Choose the correct location from the following options:</p>
		<ul class="govuk-list">
			{% for place in model.places %}
			<li><a href="/levels?place={{ place.name }}">{{ place.name | marked(model.term) | safe }}</a></li>
			{% endfor %}
		</ul>
		<p>Alternatively try searching again</p>
	</div>
</div>
{% endif %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <div class="defra-search-summary" id="searchSummary">
      <span id="map-live"></span>
    </div>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    {% if model.warnings.groups.length %}
    <ul class="defra-flood-list" id="list">
      {% for group in model.warnings.groups %}
      <li class="defra-flood-list-item-group">
        <h3 class="defra-flood-list__group-title">
          {{ group.title }}
        </h3>
        <p>{{ group.severity.subTitle }}</p>
        <ul class="defra-flood-list-subgroup">
          {% for item in group.items %}
          <li class="defra-flood-list-item defra-flood-list-item--{{ group.severity.hash }}">
            <span class="defra-flood-list-item__title">
              <a href="/target-area/{{ item.id }}">{{ item.name }}</a>
              <span class="defra-flood-list-data__description">{% if group.severity.id == 4 %}Removed at{% else %}Updated{% endif %} <time datetime="">{{ item.date }}</time></span>
            </span>
          </li>
          {% endfor %}
        </ul>
      </li>
      {% endfor %}
    </ul>
    {% endif %}
    {% include "partials/context-footer.html" %}
  </div>
  <div class="govuk-grid-column-one-third">
    {% include "partials/related-content.html" %}
  </div>
</div>
{% endblock %}

{% block pageScripts %}
{% if model and model.place %}
<script>
  window.flood = {
    model: { bbox: {{ model.bbox | dump | safe }} }
  }
</script>
{% endif %}
<script src="/public/javascripts/warnings.js"></script>
{% endblock %}