{% if model.querySearchType == 'place' and item.groupStart == loop.index %}
<!-- River -->
<tr class="defra-flood-table__row">
  <th class="defra-flood-table__cell defra-flood-table__cell--river" colspan="4" scope="colgroup">
    {% if item.riverSlug %} {{ item.groupStart }}, {{ loop.index }}
    <a href="/river-sea-groundwater-rainfall-levels?river={{ item.riverDisplay }}">{{ item.riverName }}</a>
    {% else %}
    {{ item.riverWiskiName }}
    {% endif %}
  </th>
</tr>
{% endif %}

{% set name %}
{{ item.name }}
{{ station.external_name }}
{% if item.iswales %}
(Natural Resources Wales)
{% endif %}
{% if item.isDownstream == true %}
(downstream)
{% endif %}
{% if item.type == 'groundwater' %}
borehole
{% endif %}
{% if item.riverSlug != '' and item.type == 'tide' %}
tide
{% endif %}
{% endset %}

<tr class="defra-flood-table__row{% if model.queryType == 'river' %} defra-flood-table__row--subgroup{% endif %}">
  <!-- Location -->
  <td class="defra-flood-table__cell defra-flood-table__cell--location">
    {% if item.hasDetail %}
    {% if item.type === 'rainfall' %}
    <a href="/raingauge/{{ item.id | urlencode }}">
      {{ name }}
    </a>
    {% else %}
    <a href="/station/{{ item.id | urlencode }}{% if item.isDownstream %}-downstream{% elif item.valueDownstream %}-upstream{% endif %}">
      {{ name }}
    </a>
    {% endif %}
    {% else %}
    {{ name }}
    {% endif %}
    {% if item.state != 'error' %}
    <span class="defra-flood-table__item-date">{{ item.elapsedTime }}</span>
    {% endif %}
  </td>

  <!-- Rainfall -->
  {% if item.type == 'rainfall' %}
  <td class="defra-flood-table__cell defra-flood-table__cell--rainfall">
    {{ item.value1hr }}mm
  </td>
  <td class="defra-flood-table__cell defra-flood-table__cell--rainfall">
    {{ item.value6hr }}mm
  </td>
  <td class="defra-flood-table__cell defra-flood-table__cell--rainfall">
    {{ item.value24hr }}mm
  </td>

  <!-- Sea or tide -->
  {% elif item.type == 'tide' %}
  <td class="defra-flood-table__cell defra-flood-table__cell--height{% if item.state == 'error' %} defra-flood-table__cell--error{% endif %}">
    {% if item.state == 'error' %}
    n/a
    {% else %}
    {% if item.value %}{{ item.value }}m{% endif %}
    {% endif %}
  </td>
  {% if item.riverSlug != '' %}
  <td class="defra-flood-table__cell defra-flood-table__cell--error">
    n/a
  </td>
  <td class="defra-flood-table__cell defra-flood-table__cell--error">
    n/a
  </td>
  {% endif %}

  <!-- River or groundwater -->
  {% else %}
  <td class="defra-flood-table__cell defra-flood-table__cell--height{% if item.state == 'error' %} defra-flood-table__cell--error{% endif %}">
    {% if item.state == 'error' %}
    n/a
    {% else %}
    {% if item.isDownstream %}{{ item.valueDownstream }}{% else %}{{ item.value }}{% endif %}m
    {% endif %}
  </td>
  <td class="defra-flood-table__cell defra-flood-table__cell--state{% if item.state == 'error' %} defra-flood-table__cell--error{% elif item.state == 'high' %} defra-flood-table__cell--high{% endif %}">
    {% if item.state == 'error' %}
    n/a
    {% elif item.isDownstream %}
    &nbsp;
    {% else %}
    <span class="defra-tooltip">
      <svg class="defra-tooltip__tool" aria-describedby="tooltip-state-{{ item.id | lower }}" tabindex="0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" fill-rule="evenodd" stroke-linecap="round" stroke-miterlimit="1.5">
        {% if item.state == 'high' and item.type == 'groundwater' %}
        <path d="M2.501 12.583c1.551-.637 1.967-2.166 4.375-2.166 3.043 0 2.851 2.439 5.893 2.439 2.986 0 2.85-2.439 5.892-2.439s2.85 2.439 5.892 2.439c1.377 0 2.068-.5 2.946-1.22" fill="none" stroke="currentColor" stroke-width="2.5"/><path d="M14.167 7.084v17.499h1.666V7.084h8.333V5.417H5.834v1.667h8.333z" fill="currentColor"/>
        {% elif item.state == 'high' and item.type == 'river' %}
        <path d="M6.162 9.006c.759.813 1.834 1.258 2.946 1.219 2.986 0 2.85-2.439 5.892-2.439s2.85 2.439 5.892 2.439c1.377 0 2.068-.5 2.946-1.219" fill="none" stroke="currentColor" stroke-width="2"/><path d="M11.668 12.238c-.478.208-1.022.364-1.67.438V26h10.004V12.677c-.649-.072-1.194-.225-1.67-.428v2.082h-3.334v1.67h3.334v3.329h-3.334V21h3.334v3.33h-6.664V12.238zM20 7.504c-.389-.224-.624-.575-.943-.825-.963-.757-2.091-1.393-4.057-1.393-1.955 0-3.092.631-4.061 1.384-.322.249-.558.599-.939.826V4h10v3.504z" fill="currentColor"/>
        {% elif item.state == 'low' and item.type == 'groundwater' %}
        <path d="M2.501 18.416c1.551-.637 1.967-2.166 4.375-2.166 3.043 0 2.851 2.439 5.893 2.439 2.986 0 2.85-2.439 5.892-2.439s2.85 2.439 5.892 2.439c1.377 0 2.068-.5 2.946-1.22" fill="none" stroke="currentColor" stroke-width="2.5"/><path d="M14.167 7.084v17.499h1.666V7.084h8.333V5.417H5.834v1.667h8.333z" fill="currentColor"/>
        {% elif item.state == 'low' and item.type == 'river' %}
        <path d="M20.017 26V4H9.983v22h1.7V5.7h6.634V9h-3.334v1.7h3.334v3.299h-3.334v1.7h3.334v3.299h-3.334v1.7h3.334V26h1.7z" fill="currentColor"/>
        {% elif item.type == 'groundwater' %}
        <path d="M2.501 18.416c1.551-.637 1.967-2.166 4.375-2.166 3.043 0 2.851 2.439 5.893 2.439 2.986 0 2.85-2.439 5.892-2.439s2.85 2.439 5.892 2.439c1.377 0 2.068-.5 2.946-1.22" fill="none" stroke="currentColor" stroke-width="2.5"/><path d="M14.167 7.084v17.499h1.666V7.084h8.333V5.417H5.834v1.667h8.333z" fill="currentColor"/>
        {% else %}
        <path d="M6.162 23.779c.759.813 1.834 1.259 2.946 1.219 2.986 0 2.85-2.439 5.892-2.439s2.85 2.439 5.892 2.439c1.377 0 2.068-.5 2.946-1.219" fill="none" stroke="currentColor" stroke-width="2"/><path d="M20.017 22.286V4H9.983v18.278c.391-.226.63-.582.956-.836.235-.182.48-.358.744-.519V5.7h6.634V9h-3.334v1.7h3.334v3.299h-3.334v1.7h3.334v3.299h-3.334v1.061H15c1.25 0 2.162.257 2.907.639h.41v.231c.263.162.506.339.74.522.323.255.561.611.96.835z" fill="currentColor"/>
        {% endif %}
      </svg>
      <span class="defra-tooltip__tip" role="tooltip" id="tooltip-state-{{ item.id | lower }}">
        {% if item.state == 'high' %}
        <strong>{{ item.state | capitalize }}</strong>
        {% else %}
        {{ item.state | capitalize }}
        {% endif %}
      </span>
    </span>
    {% endif %}
  </td>
  <td class="defra-flood-table__cell defra-flood-table__cell--trend{% if item.state == 'error' %} defra-flood-table__cell--error{% elif item.state == 'high' %} defra-flood-table__cell--high{% endif %}">
    {% if item.state == 'error' %}
    n/a
    {% else %}
    <span class="defra-tooltip">
      <svg class="defra-tooltip__tool" aria-describedby="tooltip-trend-{{ item.id | lower }}" tabindex="0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="20" height="30" viewBox="0 0 20 30" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.5">
        {% if item.trend == 'rising' %}
        <path d="M10 7.595v18.631" fill="none" stroke="currentColor" stroke-width="3"/><path d="M10 3.774l5 8H5l5-8z" fill="currentColor"/></svg>
        {% elif item.trend == 'falling' %}
        <path d="M10 22.405V3.774" fill="none" stroke="currentColor" stroke-width="3"/><path d="M10 26.226l5-8H5l5 8z" fill="currentColor"/></svg>
        {% else %}
        <path d="M14.179 15H2" fill="none" stroke="currentColor" stroke-width="3"/><path d="M18 15l-8-5v10l8-5z" fill="currentColor"/>
        {% endif %}
      </svg>
      <span class="defra-tooltip__tip" role="tooltip" id="tooltip-trend-{{ item.id | lower }}">Stable</span>
    </span>
    {% endif %}
  </td>

  {% endif %}
</tr>