{% set name %}
{{ item.name }}
{{ station.external_name }}
{% if item.iswales %}
(Natural Resources Wales)
{% endif %}
{% if item.isDownstream == true %}
(downstream)
{% endif %}
{% if item.type == 'groundwater' %}
borehole
{% endif %}
{% if item.riverSlug != '' and item.type == 'tide' %}
tide
{% endif %}
{% endset %}

<tr class="defra-flood-table__row{% if model.queryType == 'river' %} defra-flood-table__row--subgroup{% endif %}">
  <!-- Location -->
  <td class="defra-flood-table__cell defra-flood-table__cell--location">
    {% if item.hasDetail %}
    {% if item.type === 'rainfall' %}
    <a href="/raingauge/{{ item.id | urlencode }}">
      {{ name }}
    </a>
    {% else %}
    <a href="/station/{{ item.id | urlencode }}{% if item.isDownstream %}-downstream{% elif item.valueDownstream %}-upstream{% endif %}">
      {{ name }}
    </a>
    {% endif %}
    {% else %}
    {{ name }}
    {% endif %}
    <span class="defra-flood-table__item-meta">
      {% if item.type == 'river' %}
      <a href="/river-sea-groundwater-rainfall-levels?river={{ item.riverDisplay }}">{{ item.riverName }}</a>
      {% endif %}
    </span>
  </td>

  <!-- Time -->
  <td class="defra-flood-table__cell">
    {% if item.state != 'error' %}
    {{ item.time }} <span class="defra-flood-table__item-secondary">{{ item.date }}</span>
    {% endif %}
  </td>

  <!-- Rainfall -->
  {% if item.type == 'rainfall' %}
  <td class="defra-flood-table__cell defra-flood-table__cell--rainfall">
    {{ item.value1hr }}mm
  </td>
  <td class="defra-flood-table__cell defra-flood-table__cell--rainfall">
    {{ item.value6hr }}mm
  </td>
  <td class="defra-flood-table__cell defra-flood-table__cell--rainfall">
    {{ item.value24hr }}mm
  </td>

  <!-- Sea or tide -->
  {% elif item.type == 'tide' %}
  <td class="defra-flood-table__cell defra-flood-table__cell--height{% if item.state == 'error' %} defra-flood-table__cell--error{% endif %}">
    {% if item.state == 'error' %}
    n/a
    {% else %}
    {% if item.value %}{{ item.value }}m{% endif %}
    {% endif %}
  </td>
  {% if item.riverSlug != '' %}
  <td class="defra-flood-table__cell defra-flood-table__cell--error">
    n/a
  </td>
  {% endif %}

  <!-- River or groundwater -->
  {% else %}
  <td class="defra-flood-table__cell defra-flood-table__cell--state{% if item.state == 'error' %} defra-flood-table__cell--error{% elif item.state == 'high' %} defra-flood-table__cell--high{% endif %}">
    {% if item.state == 'error' %}
    n/a
    {% elif item.isDownstream %}
    &nbsp;
    {% else %}
    {% if item.state == 'high' %}
    <strong>{{ item.state | capitalize }}</strong>
    {% else %}
    <strong class="govuk-tag govuk-tag--grey">
    {{ item.state | capitalize }}
    </strong>
    {% endif %}
    {% endif %}
  </td>
  <td class="defra-flood-table__cell defra-flood-table__cell--height{% if item.state == 'error' %} defra-flood-table__cell--error{% endif %}">
    {% if item.state == 'error' %}
    n/a
    {% else %}
    {% if item.isDownstream %}{{ item.valueDownstream }}{% else %}{{ item.value }}{% endif %}m
    {% endif %}
  </td>
  {% endif %}
</tr>